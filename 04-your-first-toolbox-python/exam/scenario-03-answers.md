[← سناریو ۳: سوالات](./scenario-03-questions.md) | [سناریو ۴: سوالات →](./scenario-04-questions.md)

# آزمون فصل ۴: سناریو ۳ - پاسخنامه و تحلیل (مترجم ساده ژن)

در این بخش، کد کامل برای مسئله مترجم ژن به همراه توضیحات دقیق هر مرحله ارائه شده است. این سناریو چندین مهارت کلیدی پایتون را در یک مسئله واقعی بیوانفورماتیک ترکیب می‌کند.

### کد کامل راه‌حل

```python
# تعریف توالی ورودی
dna_sequence = "ATGGCCAATTTGACGTCGTTAG"

# -----------------------------------------------------
# مرحله ۱: رونویسی (DNA to mRNA)
# -----------------------------------------------------
# با استفاده از متد .replace()، تمام 'T' ها را با 'U' جایگزین می‌کنیم
mrna_sequence = dna_sequence.replace('T', 'U')

# -----------------------------------------------------
# مرحله ۲: آماده‌سازی برای ترجمه
# -----------------------------------------------------
# یک لیست خالی برای ذخیره آمینواسیدها ایجاد می‌کنیم
amino_acids = []
# یک متغیر برای کنترل حلقه
translation_stopped = False

# -----------------------------------------------------
# مرحله ۳: حلقه ترجمه
# -----------------------------------------------------
# ما باید از طول رشته مضربی از ۳ را برای جلوگیری از خطا بررسی کنیم
# range(start, stop, step)
for i in range(0, len(mrna_sequence) - (len(mrna_sequence) % 3), 3):
    # استخراج کدون فعلی با اسلایسینگ
    codon = mrna_sequence[i:i+3]

    # بررسی کدون‌های توقف
    if codon in ["UAA", "UAG", "UGA"]:
        translation_stopped = True
        break  # حلقه را فوراً متوقف کن

    # ترجمه کدون به آمینواسید
    amino_acid = ""
    if codon == "AUG":
        amino_acid = "Met"
    elif codon.startswith("GC"): # برای مدیریت GCN (GCU, GCC, GCA, GCG)
        amino_acid = "Ala"
    elif codon == "UUU" or codon == "UUC":
        amino_acid = "Phe"
    elif codon == "UGG":
        amino_acid = "Trp"
    # بر اساس صورت سوال، کدون‌های دیگری برای سایر آمینو اسیدها وجود دارد
    # که در اینجا برای سادگی، معادل‌های زیر را در نظر می‌گیریم
    elif codon.startswith("AAU"):
        amino_acid = "Asn"
    elif codon.startswith("UUG"):
        amino_acid = "Leu"
    elif codon.startswith("ACG"):
        amino_acid = "Thr"
    elif codon.startswith("UCG"):
        amino_acid = "Ser"
    else:
        amino_acid = "X" # نماینده آمینواسید ناشناخته

    amino_acids.append(amino_acid)

# -----------------------------------------------------
# مرحله ۴: ساخت رشته نهایی پروتئین
# -----------------------------------------------------
# با استفاده از متد .join()، اعضای لیست را با '-' به هم متصل می‌کنیم
protein_sequence = "-".join(amino_acids)

# -----------------------------------------------------
# مرحله ۵: چاپ نتایج
# -----------------------------------------------------
print(f"توالی DNA اصلی: {dna_sequence}")
print(f"توالی mRNA:      {mrna_sequence}")
print(f"پروتئین ترجمه‌شده: {protein_sequence}")
```

_(توجه: در کد بالا، برای کامل بودن خروجی بر اساس صورت سوال، معادل‌های آمینواسیدی دیگری نیز به صورت `elif` اضافه شده است)_

### تحلیل و توضیح کد

#### مرحله ۱: رونویسی

- `mrna_sequence = dna_sequence.replace('T', 'U')`: این ساده‌ترین و کارآمدترین راه برای انجام رونویسی در پایتون است. متد `.replace()` یک رشته جدید برمی‌گرداند که در آن تمام نمونه‌های یک زیررشته با زیررشته دیگری جایگزین شده‌اند.

#### مرحله ۲: آماده‌سازی برای ترجمه

- `amino_acids = []`: ما به جای اینکه آمینواسیدها را مستقیماً به یک رشته اضافه کنیم، آن‌ها را در یک **لیست** ذخیره می‌کنیم. این کار از نظر کارایی بهتر است، زیرا الحاق مکرر رشته‌ها در پایتون می‌تواند کند باشد. در انتها، اعضای لیست را با هم ترکیب می‌کنیم.
- `translation_stopped = False`: این یک "فلگ" یا پرچم است که به ما می‌گوید آیا ترجمه به دلیل کدون توقف، متوقف شده است یا خیر.

#### مرحله ۳: حلقه ترجمه

- **`range(0, len(mrna_sequence) - (len(mrna_sequence) % 3), 3)`**: این بخش کلیدی‌ترین قسمت حلقه است.
  - `len(mrna_sequence) % 3`: باقیمانده طول رشته بر ۳ را محاسبه می‌کند. این کار تضمین می‌کند که اگر طول رشته مضرب ۳ نبود، حلقه از مرزهای رشته خارج نشود (مثلاً اگر طول ۱۰ باشد، ما فقط تا ایندکس ۸ می‌رویم).
  - `step=3`: آرگومان سوم `range` باعث می‌شود که متغیر `i` در هر مرحله ۳ واحد افزایش یابد (۰, ۳, ۶, ...)، که دقیقاً همان چیزی است که برای حرکت کدون به کدون نیاز داریم.
- **`codon = mrna_sequence[i:i+3]`**: در هر تکرار حلقه، ما یک برش سه‌حرفی از `mrna_sequence` از ایندکس `i` تا `i+3` جدا می‌کنیم. این برش، کدون فعلی ماست.
- **`if codon in ["UAA", "UAG", "UGA"]`**: این شرط بررسی می‌کند که آیا کدون فعلی یکی از کدون‌های توقف است یا خیر.
- **`break`**: اگر شرط بالا درست باشد، دستور `break` **فوراً** اجرای حلقه را خاتمه می‌دهد. هیچ کد دیگری در داخل حلقه اجرا نخواهد شد و برنامه به اولین خط بعد از حلقه منتقل می‌شود. این دقیقاً همان منطق بیولوژیکی توقف ترجمه است.
- **منطق ترجمه `if/elif`**:
  - `codon.startswith("GC")`: برای مدیریت کدون مبهم `GCN`، ما به جای بررسی چهار حالت ممکن، به سادگی بررسی می‌کنیم که آیا کدون با `GC` شروع می‌شود یا خیر. این یک راه‌حل هوشمندانه و خلاصه است.
  - سایر کدون‌ها نیز با `elif` بررسی و آمینواسید معادل آن‌ها به لیست `amino_acids` اضافه می‌شود.

#### مرحله ۴: ساخت رشته نهایی پروتئین

- `protein_sequence = "-".join(amino_acids)`: این یک روش بسیار "پایتونیک" و کارآمد است. متد `.join()` یک رشته (در اینجا `"-"`) را به عنوان ورودی گرفته و تمام اعضای یک لیست (در اینجا `amino_acids`) را با قرار دادن آن رشته بینشان، به هم متصل می‌کند. نتیجه یک رشته واحد و زیبا است.

این سناریو به خوبی نشان می‌دهد که چگونه می‌توان با ترکیب حلقه‌ها، شرط‌ها، متدهای رشته و لیست‌ها، یک فرآیند بیولوژیکی پیچیده را در چند خط کد شبیه‌سازی کرد.
