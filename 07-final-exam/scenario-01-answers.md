[← سناریو ۱: سوالات](./scenario-01-questions.md) | [سناریو ۲: پاسخنامه →](./scenario-02-answers.md)

# پاسخنامه سناریو ۱: فارماکوژنومیکس و پیش‌بینی پاسخ به دارو

در این بخش، پاسخ‌های تشریحی و کامل تمام سوالات سناریو ۱ ارائه می‌شود. هدف، نمایش گام‌به‌گام روش رسیدن به پاسخ صحیح با تحلیل دقیق مسئله، محاسبات لازم، و ارجاع به مفاهیم کلیدی کتاب است.

---

### **سوال ۱**

**پاسخ صحیح: ج) Responder: 9, Non-Responder: 11**

**مفاهیم کلیدی:** پاک‌سازی داده شرطی، کار با `pandas` (فصل ۴ و ۵)

**مراحل حل:**

1.  **استانداردسازی مقادیر اولیه:**

    - ابتدا ستون `Response` را به حروف بزرگ تبدیل می‌کنیم تا مقادیری مانند `Responder`، `RESPONDER` و `non-responder` یکسان شوند.
    - قبل از پر کردن مقادیر گمشده، شمارش به این صورت است:
      - `RESPONDER`: 8 بیمار
      - `NON-RESPONDER`: 10 بیمار
      - گمشده: 2 بیمار (P09 و P12)

2.  **اجرای استراتژی جایگزینی برای مقادیر گمشده:**

    - **بیمار P09:** مقدار `Tumor_Type` او `Large Cell` است. طبق قانون، مقدار گمشده با `NON-RESPONDER` پر می‌شود.
      - شمار `NON-RESPONDER` ها: 10 + 1 = 11
    - **بیمار P12:** مقدار `Tumor_Type` او `Adenocarcinoma` است. طبق قانون، مقدار گمشده با `RESPONDER` پر می‌شود.
      - شمار `RESPONDER` ها: 8 + 1 = 9

3.  **شمارش نهایی:**
    - تعداد کل بیماران `RESPONDER`: **9**
    - تعداد کل بیماران `NON-RESPONDER`: **11**

این محاسبات دقیقاً با گزینه **(ج)** مطابقت دارد.

---

### **سوال ۲**

**پاسخ صحیح: ب) 3 ستون اضافی، مجموع: 10**

**مفاهیم کلیدی:** کدگذاری One-Hot، ابعاد دیتافریم (فصل ۵)

**مراحل حل:**

1.  **شناسایی دسته‌ها:** ستون `Tumor_Type` دارای سه دسته (category) منحصربه‌فرد است: `Adenocarcinoma`, `Squamous Cell`, و `Large Cell`.
2.  **عملکرد One-Hot Encoding:** این روش به ازای هر دسته منحصربه‌فرد، یک ستون جدید به دیتافریم اضافه می‌کند. بنابراین، 3 ستون جدید با نام‌های احتمالی `Tumor_Type_Adenocarcinoma`, `Tumor_Type_Squamous Cell`, و `Tumor_Type_Large Cell` اضافه خواهد شد. (ستون اصلی `Tumor_Type` معمولاً حذف می‌شود، اما سوال در مورد ستون‌های "اضافی" است).
3.  **محاسبه مجموع:** ستون جدید `Tumor_Type_Adenocarcinoma` برای هر ردیفی که `Tumor_Type` آن `Adenocarcinoma` بوده، مقدار 1 و برای بقیه 0 خواهد داشت. با شمارش تعداد ردیف‌ها با این نوع تومور در داده اولیه، به عدد 10 می‌رسیم (P01, P03, P05, P06, P08, P10, P12, P14, P16, P20). بنابراین، مجموع مقادیر این ستون جدید برابر با 10 خواهد بود.

---

### **سوال ۳**

**پاسخ صحیح: ج) Precision (TP / (TP+FP))، زیرا تضمین می‌کند بیمارانی که به عنوان "Responder" انتخاب می‌شوند، به احتمال زیاد واقعاً به دارو پاسخ خواهند داد.**

**مفاهیم کلیدی:** معیارهای ارزیابی مدل، توازن Precision/Recall، اهداف کسب‌وکار (فصل ۵)

**تحلیل:**

- **هدف مسئله:** انتخاب بهترین نامزدها برای یک کارآزمایی بالینی گران‌قیمت و مهم. در این سناریو، **هزینه یک انتخاب اشتباه مثبت (False Positive)** بسیار بالا است. یک FP بیماری است که مدل پیش‌بینی کرده "Responder" است، اما در واقعیت "Non-Responder" خواهد بود. انتخاب چنین بیماری برای کارآزمایی منجر به هدر رفتن منابع، زمان و قرار دادن بیمار در معرض دارویی می‌شود که برای او سودی ندارد.
- **Precision** دقیقاً همین مسئله را هدف قرار می‌دهد. این معیار پاسخ می‌دهد: "از بین تمام بیمارانی که مدل به عنوان 'Responder' پیش‌بینی کرده، چه کسری واقعاً 'Responder' هستند؟". Precision بالا به معنای نرخ FP پایین است.
- در مقابل، **Recall** بر روی پیدا کردن تمام "Responder" های ممکن تمرکز دارد و بالا بردن آن ممکن است به قیمت افزایش FP تمام شود که در این سناریو نامطلوب است. **Accuracy** به دلیل عدم تعادل احتمالی کلاس‌ها و عدم تمرکز بر خطای خاص مورد نظر ما، معیار مناسبی نیست.

---

### **سوال ۴**

**پاسخ صحیح: الف) Precision=0.88, Recall=0.75, F1-Score=0.81**

**مفاهیم کلیدی:** ماتریس درهم‌ریختگی، محاسبه معیارهای ارزیابی (فصل ۵)

**مراحل حل:**

1.  **داده‌ها از ماتریس:**

    - True Positives (TP) = 15 (مدل به درستی Responder را پیش‌بینی کرده)
    - False Positives (FP) = 2 (مدل به اشتباه Non-Responder را Responder پیش‌بینی کرده)
    - False Negatives (FN) = 5 (مدل به اشتباه Responder را Non-Responder پیش‌بینی کرده)
    - True Negatives (TN) = 28

2.  **محاسبه Precision (برای کلاس ۱ - Responder):**

    - Precision = TP / (TP + FP) = 15 / (15 + 2) = 15 / 17 ≈ **0.882**

3.  **محاسبه Recall (برای کلاس ۱ - Responder):**

    - Recall = TP / (TP + FN) = 15 / (15 + 5) = 15 / 20 = **0.75**

4.  **محاسبه F1-Score (برای کلاس ۱ - Responder):**
    - F1-Score = 2 _ (Precision _ Recall) / (Precision + Recall)
    - F1-Score = 2 _ (0.882 _ 0.75) / (0.882 + 0.75) = 2 \* 0.6615 / 1.632 = 1.323 / 1.632 ≈ **0.81**

نتایج محاسبه شده با گزینه **الف** مطابقت کامل دارد.

---

### **سوال ۵**

**پاسخ صحیح: ب) یک رابطه منفی قوی وجود دارد؛ با افزایش سن، سطح C_Marker به شدت کاهش می‌یابد.**

**مفاهیم کلیدی:** رگرسیون خطی، همبستگی، تحلیل داده اکتشافی (فصل ۱ و ۶)

**مراحل حل:**

این سوال نیازی به محاسبه دقیق پارامترهای مدل (`w` و `b`) ندارد، بلکه نیازمند درک و تفسیر روند کلی داده‌ها است.

1.  **مرتب‌سازی داده‌ها بر اساس سن (متغیر مستقل):**

    - بیمار P05: (سن: 55, مارکر: 210.8)
    - بیمار P03: (سن: 58, مارکر: 171.1)
    - بیمار P08: (سن: 59, مارکر: 195.4)
    - بیمار P01: (سن: 65, مارکر: 154.5)

2.  **تحلیل روند:**
    - با افزایش سن از ۵۵ به ۶۵، روند کلی سطح `C_Marker` کاهشی است (از ۲۱۰.۸ به ۱۵۴.۵).
    - بیمار P08 کمی از این روند خارج است (سن ۵۹ مارکر بالاتری از سن ۵۸ دارد)، اما این نویز در داده‌های واقعی طبیعی است. خط رگرسیونی که به این داده‌ها برازش داده شود، یک شیب کلی منفی خواهد داشت.
    - به طور مشخص، کم‌سن‌ترین بیمار (۵۵ ساله) بالاترین سطح مارکر را دارد و مسن‌ترین بیمار (۶۵ ساله) پایین‌ترین سطح مارکر را دارد. این نشان‌دهنده یک **رابطه منفی (Negative Correlation)** است.
    - چون تغییرات `C_Marker` نسبت به تغییرات سن قابل توجه است، می‌توان آن را یک رابطه "قوی" توصیف کرد.
    - بنابراین، بهترین توصیف، وجود یک رابطه منفی قوی است.
