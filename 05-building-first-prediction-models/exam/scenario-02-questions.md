# آزمون فصل ۵: سناریو ۲ - ارزیابی صادقانه: قدرت تقسیم داده

[→ سناریو ۱: سوالات](./scenario-01-questions.md) | [سناریو ۳: سوالات ←](./scenario-03-questions.md) | [پاسخنامه سناریو ۲](./scenario-02-answers.md)

### صورت مسئله

در سناریوی قبل، شما داده‌ها را با موفقیت پاک‌سازی و آماده کردید. اکنون یک همکار به شما می‌گوید: "چرا داده‌ها را تقسیم کنیم؟ بیایید مدل را روی تمام داده‌های موجود آموزش دهیم تا همه الگوها را یاد بگیرد و بعد همان داده‌ها را به آن بدهیم تا ببینیم چقدر دقیق است. این کار دقت را حداکثر می‌کند!"

شما می‌دانید که این رویکرد اشتباه و خطرناک است. وظیفه شما این است که به صورت عملی نشان دهید چرا این دیدگاه منجر به یک ارزیابی بیش از حد خوش‌بینانه و غیرقابل اعتماد از عملکرد مدل می‌شود.

### داده‌های آماده

برای شروع، فرض کنید داده‌های `X` و `y` از سناریوی قبل به صورت زیر آماده هستند. اسکریپت خود را با این کد شروع کنید:

```python
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.neighbors import KNeighborsClassifier
from sklearn.metrics import accuracy_score

# داده‌های پاک‌سازی شده از سناریو ۱
data = {
    'radius_mean': [17.99, 20.57, 19.69, 11.42, 20.29, 12.45],
    'texture_mean': [10.38, 17.77, 21.25, 20.38, 14.34, 15.7],
    'perimeter_mean': [122.8, 132.9, 130.0, 77.58, 135.1, 82.57],
    'area_mean': [1001.0, 1326.0, 1203.0, 386.1, 878.6, 477.1]
}
X = pd.DataFrame(data)

y = pd.Series([1, 1, 0, 0, 0, 1], name='diagnosis_numeric')
```

### الزامات اسکریپت

#### بخش الف: روش اشتباه (ارزیابی روی داده‌های آموزش)

1.  یک طبقه‌بند `KNeighborsClassifier` با `n_neighbors=3` نمونه‌سازی کنید.
2.  مدل را با **تمام داده‌های** `X` و `y` آموزش دهید (`.fit`).
3.  عملکرد مدل را با پیش‌بینی بر روی **همان داده‌های** `X` که با آن آموزش دیده است، بسنجید.
4.  دقت (accuracy) این پیش‌بینی‌ها را محاسبه کرده و با یک پیام مشخص چاپ کنید.

#### بخش ب: روش صحیح (ارزیابی روی داده‌های آزمون)

1.  با استفاده از تابع `train_test_split`، داده‌های `X` و `y` را به چهار بخش `X_train`, `X_test`, `y_train`, `y_test` تقسیم کنید. از `test_size=0.33` و `random_state=42` برای تضمین نتایج یکسان استفاده کنید.
2.  یک طبقه‌بند `KNeighborsClassifier` **جدید** با `n_neighbors=3` نمونه‌سازی کنید.
3.  مدل را **فقط** با داده‌های آموزشی (`X_train`, `y_train`) آموزش دهید.
4.  عملکرد مدل را با پیش‌بینی بر روی داده‌های **آزمون** (`X_test`) که هرگز ندیده است، بسنجید.
5.  دقت این پیش‌بینی‌ها را محاسبه کرده و با یک پیام مشخص چاپ کنید.

#### بخش ج: تحلیل

پس از اجرای کد، به دو دقت به دست آمده نگاه کنید و به سوال زیر فکر کنید:

- چرا دقت در "روش اشتباه" به طور قابل توجهی بالاتر از "روش صحیح" است؟
- کدام یک از این دو عدد، معیار واقعی‌تری از عملکرد مدل شما در مواجهه با بیماران جدید و دیده‌نشده در دنیای واقعی است؟ چرا؟

### خروجی مورد انتظار

اسکریپت شما باید **دقیقا** دو خط خروجی زیر را تولید کند:

```
دقت (روش اشتباه): 100.00%
دقت (روش صحیح): 50.00%
```

_(این اختلاف فاحش، قدرت و اهمیت تقسیم داده را به وضوح نشان می‌دهد.)_
